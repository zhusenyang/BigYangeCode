<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="../js/config.js"></script>
    <script src="../layui/layui.js"></script>
    <title>网站管理系统</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <script type="text/javascript" src="../js/jquery.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">网站管理系统</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item"><a href="javascript:;">
                <img class="layui-nav-img" id="user_head_top">
                <span id="user_name_top">用户名</span>
            </a>
                <dl class="layui-nav-child">
                    <dd>
                        <a href="javascrpt:;">基本资料</a>
                    </dd>
                    <dd>
                        <a href="">安全设置</a>
                    </dd>
                </dl></li>
            <li class="layui-nav-item">
                <a href="javascript:;" onclick="logOut()">登出</a>
            </li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul id="left_order" class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="javascript:;">基本资料</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 0px;">
            <div class="" id="home_set" style="">
                <div class="layui-tab">
                    <ul class="layui-tab-title">
                        <li class="layui-this">基本资料</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div class="layui-tab-item layui-show">
                            <form class="layui-form layui-col-sm7" action="" lay-filter="user-info-form" >
                                <div class="layui-form-item">
                                    <label class="layui-form-label">用户名</label>
                                    <div class="layui-input-inline">
                                        <input id="user-name" style="background-color: #FBFBFB" autocomplete="off" class="layui-input disabled layui-btn-disabled" name="userName" disabled="disabled" >
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">昵称</label>
                                    <div class="layui-input-inline">
                                        <input id="nicoName-info" autocomplete="off" class="layui-input" name="nicoName">
                                    </div>


                                    <div class="layui-form-mid layui-word-aux"></div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">性别</label>
                                    <div class="layui-input-block">
                                        <input id="man" type="radio" name="sex" value="男" title="男♂" name="sex">
                                        <input id="women" type="radio" name="sex" value="女" title="女♀" name="sex"  >
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">地区</label>
                                    <div class="layui-input-inline">
                                        <input id="user-area" autocomplete="off" class="layui-input" name="user-area">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux"></div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">邮箱</label>
                                    <div class="layui-input-inline">
                                        <input id="eMail" style="background-color: #FBFBFB" disabled="disabled" autocomplete="off" class="layui-btn-disabled layui-input" name="user-area">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">入站日期</label>
                                    <div class="layui-input-inline ">
                                        <input id="registered_Date"  style="background-color: #FBFBFB" disabled="disabled" autocomplete="off" class="layui-btn-disabled layui-input" name="registered_Date">
                                    </div>
                                </div>
                                <div class="layui-form-item layui-form-text">
                                    <label class="layui-form-label">个人简介</label>
                                    <div class="layui-input-block">
                                        <textarea id="introduction" name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                                    </div>
                                </div>
                            </form>
                            <div class="layui-form layui-col-sm3">
                                <img id="form_head" style="height: 200px;width: 200px;"><br><br>
                                <button type="button" class="layui-btn" id="test1">
                                    <i class="layui-icon">&#xe67c;</i>上传头像
                                </button>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn" >保存</button>
                                    <button class="layui-btn layui-btn-primary" onclick="reset()">重置</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-footer">
        <!-- 底部固定区域 -->
        <a href="http://bigyangcode.xyz">© - bigyangcode</a>
    </div>
</div>

</body>
</html>
<script type="text/javascript">
    var user ;
    var element;
    layui.use('element', function() {
        element = layui.element;
    });
    var layer
    var form
    layui.use(['layer', 'form'], function(){
             layer = layui.layer;
             form = layui.form;
    });
    //获取用户信息
    $(function () {
        $.ajax({
            url: yu_ming+"/user/getInfo",
            type : "post",
            scriptCharset : 'utf-8',
            success: function(result){
                if(result.stateNum==200){
                    var data = result.data;
                    user=data;
                    $("#user-name").val(user.userName);
                    if(user.nicoName==null){
                        $("#nicoName-info").val(user.userName);
                    }else {
                        $("#nicoName-info").val(user.nicoName);
                    }
                    if (user.sex=="man"){
                        $("#man").click();
                    }else {
                        $("#woman").click();
                    }
                    $("#user_head_top").attr("src","../head/"+user.head)
                    $("#form_head").attr("src","../head/"+user.head)
                    $("#introduction").val(user.introduction);
                    $("#user-area").val(user.area)
                    $("#eMail").val(user.eMail)
                    $("#registered_Date").val(user.registered_Date.split(" ")[0])
                }
            }
        });
    })

    //登出
    function logOut(){
        $.ajax({
            url: yu_ming+"/user/logout",
            type : "post",
            scriptCharset : 'utf-8',
            success: function(result){
                if(result.stateNum==200){
                    layer.msg("退出成功,返回主页s.")
                    window.location.href=yu_ming;
                }
            }
        });
    }

    function reset(){
        $("#user-name").val(user.userName);
        if(user.nicoName==null){
            $("#nicoName-info").val(user.userName);
        }else {
            $("#nicoName-info").val(user.nicoName);
        }
        if (user.sex=="man"){
            $("#man").click();
        }else {
            $("#woman").click();
        }
        $("#introduction").val(user.introduction);
        $("#form_head").attr("src","../head/"+user.head)
        $("#introduction").val(user.introduction);
        $("#user-area").val(user.area)
        $("#eMail").val(user.eMail)
        $("#registered_Date").val(user.registered_Date.split(" ")[0])
    }
</script>
